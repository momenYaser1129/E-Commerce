<!-- Main CAt -->
<section>
  <div class="row g-0">
    <div class="col-md-9">
      <div>
        <owl-carousel-o [options]="customOptionsMain">
          <ng-template carouselSlide>
            <img
              src="./assets/images/img1.avif"
              height="350px"
              class="w-100 object-fit-cover"
              alt=""
            />
          </ng-template>
          <ng-template carouselSlide>
            <img
              src="./assets/images/img2.avif"
              height="350px"
              class="w-100 object-fit-cover"
              alt=""
            />
          </ng-template>
          <ng-template carouselSlide>
            <img
              src="./assets/images/img3.avif"
              height="350px"
              class="w-100"
              alt=""
            />
          </ng-template>
          <ng-template carouselSlide>
            <img
              src="./assets/images/img4.avif"
              height="350px"
              class="w-100 object-fit-cover"
              alt=""
            />
          </ng-template>
          <ng-template carouselSlide>
            <img
              src="./assets/images/img5.avif"
              height="350px"
              class="w-100 object-fit-cover"
              alt=""
            />
          </ng-template>
          <ng-template carouselSlide>
            <img
              src="./assets/images/img6.avif"
              height="350px"
              class="w-100 object-fit-cover"
              alt=""
            />
          </ng-template>
        </owl-carousel-o>
      </div>
    </div>
    <div class="col-md-3">
      <div>
        <img
          src="./assets/images/grocery-banner.png"
          height="175px"
          class="w-100 object-fit-cover"
          alt=""
        />
        <img
          src="./assets/images/grocery-banner-2.jpeg"
          height="175px"
          class="w-100 object-fit-cover"
          alt=""
        />
      </div>
    </div>
  </div>
</section>

<!-- Categories -->
<section class="my-2">
<div class="container-fluid bg-light py-5">
  <div class="row mb-4">
    <div class="col-12">
      <h2 class="display-4 fw-bold text-center mb-3">{{ 'home.shopByCategory' | translate }}</h2>
      <div class="d-flex justify-content-center">
        <div class="bg-main deco"></div>
      </div>
    </div>
  </div>

  <owl-carousel-o [options]="customOptionsCat" class="category-carousel">
    @for (cat of categoryList; track cat._id) {
    <ng-template carouselSlide>
      <div class="category-item p-3">
        <div class="card border-0 shadow-lg rounded-3 overflow-hidden">
          <img
            [src]="cat.image"
            [alt]="cat.name"
            class="w-100 object-fit-cover"
            height="200px"
          />

          <div class="card-body text-center d-flex justify-content-center align-items-center  bg-white">
            <h6 class="fw-bold mb-0  text-truncate">{{ cat.name }}</h6>
            
          </div>
        </div>
      </div>
    </ng-template>
    }
  </owl-carousel-o>
</div>
</section>

<!-- Search input -->
<section class="py-4 bg-white">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-md-7">
        <div class="position-relative">
          <input
            type="text"
            [(ngModel)]="dataOfSearch"
            class="form-control ps-5 py-3 rounded-4 shadow-sm border border-2 border-main"
            [placeholder]="'home.searchPlaceholder' | translate"
          />
          <i
            class="fas fa-search position-absolute top-50 start-0 translate-middle-y ms-3 text-main"
          ></i>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Products -->
<section class="py-3">
  <h2 class="display-4 fw-bold text-center mb-3">{{ 'home.popularProducts' | translate }}</h2>
  <div class="bg-main deco m-auto mb-3"></div>

  <div
    class="row row-cols-2 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 row-cols-xl-6 g-3"
  >
    @for (product of productList.slice(0,12) | search : dataOfSearch; track product.id) {
    <div class="col">
      <div class="card h-100 shadow-sm product">
        <div class="cr">
          <!-- Wishlist button -->
          <button class="btn btn-light position-absolute top-0 end-0 m-2 rounded-circle shadow-sm z-index-10" (click)="toggleWishlist(product.id)">
            <i [class]="wishlistStatus[product.id] ? 'fas fa-heart text-danger' : 'far fa-heart text-danger'"></i>
          </button>
          <!-- Product image -->
          <img
            [routerLink]="['/details',product.id]"
            [src]="product.imageCover"
            class="card-img-top w-100 object-fit-cover z-index-9" 
            height="250px"
            [alt]="product.title"
          />
        </div>
        <!-- Card body -->
        <div class="card-body d-flex flex-column">
          <span class="badge bg-light text-dark mb-2">{{
            product.category.name
          }}</span>
          <h6 class="card-title text-truncate">{{ product.title }}</h6>

          <!-- Price and rating -->
          <div
            class="d-flex justify-content-between align-items-center mt-auto pt-2"
          >
            <span class="fw-bold text-main">{{ product.price |currency : 'GBP'}}</span>
            <div>
              <i class="fas fa-star text-warning"></i>
              <small class="text-muted ms-1">{{
                product.ratingsAverage
              }}</small>
            </div>
          </div>
        </div>

        <!-- Add to cart button -->
        <button class="btn btn-main w-100 mt-3" (click)="addToCart(product.id)">
          <i class="fas fa-shopping-cart me-2"></i>{{ 'home.addToCart' | translate }}
        </button>
      </div>
    </div>
    }
  </div>
</section>
